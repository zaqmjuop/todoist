{"version":3,"sources":["assets/scripts/indexeddb/store.js","assets/scripts/indexeddb/missions.js","assets/scripts/index.js"],"names":["indexedDB","window","mozIndexedDB","webkitIndexedDB","msIndexedDB","IDBTransaction","webkitIDBTransaction","msIDBTransaction","IDBKeyRange","webkitIDBKeyRange","msIDBKeyRange","Store","storeName","Error","name","databaseName","database","IDBDatabase","TypeError","version","onclose","isOpen","close","Number","isSafeInteger","openVersion","closeDB","promise","Promise","resolve","reject","request","open","onsuccess","setDB","result","onerror","event","target","error","onupgradeneeded","tx","transaction","objectStoreNames","contains","createObjectStore","keyPath","autoIncrement","objectStore","createIndex","unique","openDB","then","column","option","columnOption","db","store","indexNames","deleteIndex","columns","Array","newColumns","forEach","columnType","push","index","id","isReady","delete","ids","length","ready","deleteItem","args","isInt","isArray","deleteItems","item","undefined","put","items","setItem","isObj","setItems","get","sortIds","sort","range","bound","getAll","resPromise","includes","idQuery","getItem","getItems","indexName","openIndexName","attrQuery","keys","Object","firstIndex","only","isEqual","key","missions","create","set","save","init","addColumns","isKeyEnter","KeyboardEvent","keyCode","isElement","element","nodeType","isString","str","getParent","parentNode","getParents","parent","Index","i","getIndex","Dom","query","eleReg","eleMatch","match","tagName","toLocaleUpperCase","dom","document","createElement","querySelectorAll","console","warn","value","setAttribute","getAttribute","content","ary","split","classList","add","remove","object","appendChild","removeChild","querySelector","innerText","innerHTML","parents","all","callback","addEventListener","removeEventListener","$","of","Dialog","body","ReferenceError","dialog","addClass","curtain","alert","msg","buttonGroup","submit","text","on","append","message","createDialogElement","Mission","listElement","formElement","adderElement","loadDB","results","missionItem","createMissionItem","date","openForm","find","adderParent","insertBefore","attr","removeClass","itemId","createMission","updateMission","formInputs","children","input","click","hideForm","finishItemButtons","button","form","contentInput","dateInput","data","nextItem","nextSibling","missionItems","leftText","rightText","isElementComplete","before","moveIcon","left","right","icon","link","transformItem","log","dataTransfer","setData","preventDefault","itemNext","dragId","dragItem","dragNext","getData","mission"],"mappings":"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","file":"scripts.5fddedeb.map","sourceRoot":"..","sourcesContent":["\nconst indexedDB = window.indexedDB ||\n  window.mozIndexedDB ||\n  window.webkitIndexedDB ||\n  window.msIndexedDB;\nconst IDBTransaction = window.IDBTransaction ||\n  window.webkitIDBTransaction ||\n  window.msIDBTransaction;\nconst IDBKeyRange = window.IDBKeyRange ||\n  window.webkitIDBKeyRange ||\n  window.msIDBKeyRange;\n\nclass Store {\n  constructor(storeName) {\n    if (!indexedDB || !IDBTransaction || !IDBKeyRange) throw new Error('您的浏览器不支持indexedDB');\n    this.name = this.name || storeName;\n    this.databaseName = 'myEncapsulation';\n    return this;\n  }\n\n  setDB(database) {\n    if (!database || !(database instanceof IDBDatabase)) throw new TypeError('参数应是数据库对象');\n    this.database = database;\n    this.version = this.database.version;\n    this.database.onclose = () => {\n      this.database.isOpen = false;\n    };\n    return database;\n  }\n\n  closeDB() {\n    return this.database && (this.database instanceof IDBDatabase) && this.database.close();\n  }\n\n  openDB(version) {\n    // openDB()\n    // openDB(version) version是版本号 int类型 例如openDB(99)\n    // 返回值 promise 对象 resolve(this.database) reject(error);\n    if (version) {\n      if (!Number.isSafeInteger(version)) throw new TypeError('版本号只能是整数');\n      if (version < this.version) throw new TypeError('新版本号不能比当前版本号低');\n    }\n    const openVersion = (version && Number.isSafeInteger(version) && (version > this.version))\n      ? version : this.version;\n    this.closeDB();\n    const promise = new Promise((resolve, reject) => {\n      // const request = indexedDB.open(this.databaseName, openVersion);\n      const request = (version && Number.isSafeInteger(version) && (version > this.version))\n        ? indexedDB.open(this.databaseName, openVersion)\n        : indexedDB.open(this.databaseName);\n      request.onsuccess = () => {\n        this.setDB(request.result);\n        this.database.isOpen = true;\n        resolve(this.database);\n      };\n      request.onerror = (event) => { reject(event.target.error); };\n      request.onupgradeneeded = (event) => {\n        this.setDB(event.target.result);\n        const tx = event.target.transaction;\n        if (!tx.objectStoreNames.contains(this.name)) {\n          this.database.createObjectStore(this.name, { keyPath: 'id', autoIncrement: true });\n          tx.objectStore(this.name).createIndex('id', 'id', { unique: true });\n        }\n      };\n    });\n    return promise;\n  }\n\n  ready() {\n    return this.openDB().then(database => this.setDB(database));\n  }\n\n  isReady() {\n    return this.database && (this.database instanceof IDBDatabase) && this.database.isOpen;\n  }\n\n  addColumn(column, option) {\n    // addColumn(columnName) columnName是索引名,String类型,如addColumn('age')\n    // addColumn(columnName, option) option目前只能指定是否去重复,如addColumn('name', { unique: true })\n    // 返回值promise resolve(database) database是示例对象的database属性\n    if (!column || (typeof column !== 'string')) throw new TypeError('索引名称必须存在且为字符串');\n    if (option && (typeof option !== 'object')) throw new TypeError('索引选项应是对象类型');\n    const columnOption = {};\n    columnOption.unique = option && option.unique;\n    const openVersion = this.version + 1;\n    this.closeDB();\n    const promise = new Promise((resolve, reject) => {\n      const request = indexedDB.open(this.databaseName, openVersion);\n      request.onsuccess = () => {\n        this.setDB(request.result);\n        this.database.isOpen = true;\n        resolve(this.database);\n      };\n      request.onerror = (event) => { reject(event.target.error); };\n      request.onupgradeneeded = (event) => {\n        const db = event.target.result;\n        const tx = event.target.transaction;\n        this.database = db;\n        this.version = this.database.version;\n        const store = (tx && tx.objectStoreNames.contains(this.name))\n          ? tx.objectStore(this.name)\n          : db.createObjectStore(this.name, { keyPath: 'id', autoIncrement: true });\n        if (!store.indexNames.contains('id')) {\n          store.createIndex('id', 'id', { unique: true });\n        }\n        if (!store.indexNames.contains(column)) {\n          store.createIndex(column, column, { unique: columnOption.unique });\n        }\n      };\n    });\n    return promise;\n  }\n\n  deleteColumn(column) {\n    // deleteColumn(column) columnName是索引名,String类型,如deleteColumn('userName')\n    // 返回值promise resolve(database) database是示例对象的database属性\n    if (!column || (typeof column !== 'string')) throw new TypeError('需要一个字符串类型的索引名');\n    this.closeDB();\n    const openVersion = this.version + 1;\n    const promise = new Promise((resolve, reject) => {\n      const request = indexedDB.open(this.databaseName, openVersion);\n      request.onsuccess = () => {\n        this.setDB(request.result);\n        this.database.isOpen = true;\n        resolve(this.database);\n      };\n      request.onerror = (event) => {\n        this.database = request.result;\n        this.version = request.result.version;\n        this.database.close();\n        reject(event.target.error);\n      };\n      request.onupgradeneeded = (event) => {\n        const db = event.target.result;\n        const tx = event.target.transaction;\n        this.database = db;\n        this.version = this.database.version;\n        const store = (tx && tx.objectStoreNames.contains(this.name))\n          ? tx.objectStore(this.name)\n          : db.createObjectStore(this.name, { keyPath: 'id', autoIncrement: true });\n        if (!store.indexNames.contains('id')) {\n          store.createIndex('id', 'id', { unique: true });\n        }\n\n        if (store.indexNames.contains(column)) {\n          store.deleteIndex(column);\n        }\n      };\n    });\n    return promise;\n  }\n\n  addColumns(columns) {\n    // addColumns(['userName'])\n    // addColumns([{ index: 'userAge', unique: false }])\n    // addColumns(['userName', { index: 'userAge', unique: false }])\n    // 返回值promise resolve(database) database是示例对象的database属性\n    if (!columns || !(columns instanceof Array)) throw new TypeError('列名组应该是一个数组');\n    const newColumns = [];\n    columns.forEach((column) => {\n      const columnType = typeof column;\n      if (columnType === 'string') {\n        newColumns.push({ index: column, unique: false });\n      } else if (columnType === 'object') {\n        newColumns.push({ index: column.index, unique: column.unique });\n      } else {\n        throw new TypeError('索引列格式错误');\n      }\n    });\n    this.closeDB();\n    const openVersion = this.version + 1;\n    const promise = new Promise((resolve, reject) => {\n      const request = indexedDB.open(this.databaseName, openVersion);\n      request.onsuccess = () => {\n        this.setDB(request.result);\n        this.database.isOpen = true;\n        resolve(this.database);\n      };\n      request.onerror = (event) => {\n        this.database = request.result;\n        this.version = request.result.version;\n        this.database.close();\n        reject(event.target.error);\n      };\n      request.onupgradeneeded = (event) => {\n        const db = event.target.result;\n        const tx = event.target.transaction;\n        this.database = db;\n        this.version = this.database.version;\n        const store = (tx && tx.objectStoreNames.contains(this.name))\n          ? tx.objectStore(this.name)\n          : db.createObjectStore(this.name, { keyPath: 'id', autoIncrement: true });\n        if (!store.indexNames.contains('id')) {\n          store.createIndex('id', 'id', { unique: true });\n        }\n        newColumns.forEach((column) => {\n          if (!store.indexNames.contains(column.index)) {\n            store.createIndex(column.index, column.index, { unique: column.unique });\n          }\n        });\n        this.database = db;\n      };\n    });\n    return promise;\n  }\n\n  deleteColumns(columns) {\n    // demo.deleteColumns(['userName', 'userAge'])\n    // 返回值promise resolve(database) database是示例对象的database属性\n    if (!columns || !(columns instanceof Array)) throw new TypeError('需要一个包含索引名的数组');\n    columns.forEach((column) => {\n      if (!column || (typeof column !== 'string')) throw new TypeError('索引名不是字符串类型');\n    });\n    this.closeDB();\n    const openVersion = this.version + 1;\n    const promise = new Promise((resolve, reject) => {\n      const request = indexedDB.open(this.databaseName, openVersion);\n      request.onsuccess = () => {\n        this.setDB(request.result);\n        this.database.isOpen = true;\n        resolve(this.database);\n      };\n      request.onerror = (event) => {\n        this.database = request.result;\n        this.version = request.result.version;\n        this.database.close();\n        reject(event.target.error);\n      };\n      request.onupgradeneeded = (event) => {\n        const db = event.target.result;\n        const tx = event.target.transaction;\n        this.database = db;\n        this.version = this.database.version;\n        const store = (tx && tx.objectStoreNames.contains(this.name))\n          ? tx.objectStore(this.name)\n          : db.createObjectStore(this.name, { keyPath: 'id', autoIncrement: true });\n        if (!store.indexNames.contains('id')) {\n          store.createIndex('id', 'id', { unique: true });\n        }\n        columns.forEach((column) => {\n          if (store.indexNames.contains(column)) {\n            store.deleteIndex(column);\n          }\n        });\n      };\n    });\n    return promise;\n  }\n\n  deleteItem(id) {\n    // deleteItem(id) id是目标数据的id属性值 Integer类型,如deleteItem(1)\n    // 返回值promise resolve(undefined)\n    if (!Number.isSafeInteger(id)) throw new TypeError('参数只能是目标数据的id属性值');\n    if (!this.isReady()) throw new Error('数据库尚未准备好');\n    const store = this.database.transaction(this.name, 'readwrite').objectStore(this.name);\n    const promise = new Promise((resolve, reject) => {\n      const request = store.delete(id);\n      request.onsuccess = () => { resolve(request.result); };\n      request.onerror = (event) => { reject(event.target.error); };\n    });\n    return promise;\n  }\n\n  deleteItems(ids) {\n    // deleteItems(ids) ids是由id组成的数组 Array类型,如deleteItems([1,2,3])\n    // 返回值promise resolve(undefined)\n    if (!(ids instanceof Array) || (ids.length === 0)) throw new TypeError('参数只能是目标数据的id属性值组成的数组且不能为空');\n    ids.forEach((id) => {\n      if (!Number.isSafeInteger(id)) throw new TypeError('id属性值应是整数');\n    });\n    let promise = this.ready();\n    ids.forEach((id) => {\n      promise = promise.then(() => this.deleteItem(id));\n    });\n    return promise;\n  }\n\n  delete(args) {\n    // delete(id) id是目标数据的id属性值 Integer类型,如delete(1)\n    // delete(ids) ids是由id组成的数组 Array类型,如delete([1,2,3])\n    // 返回值promise resolve(undefined)\n    const isInt = Number.isSafeInteger(args);\n    const isArray = args instanceof Array;\n    if (!isInt && !isArray) throw new TypeError('参数只能是目标数据的id属性值或由id组成的数组');\n    let promise;\n    if (isInt) {\n      promise = this.deleteItem(args);\n    } else if (isArray) {\n      promise = this.deleteItems(args);\n    }\n    return promise;\n  }\n\n  setItem(item) {\n    // setItem(item) item插入的条目, Object类型,如 setItem({ id: 3, name: 'xiaoming', age: 10 })\n    // 使用id属性为主键，可以设置item.id属性值(Integer类型)为插入的主键,若item.id不合法则自动分配id属性\n    // 返回值是promise\n    // resolve() 输出保存后的item.id\n    if (!item || (typeof item !== 'object')) throw new TypeError('参数只能是一个对象');\n    if ((item.id !== undefined) && !Number.isSafeInteger(item.id)) throw new TypeError('参数的id属性只能为整数');\n    if (!this.isReady()) throw new Error('数据库尚未准备好');\n    const store = this.database.transaction(this.name, 'readwrite').objectStore(this.name);\n    const promise = new Promise((resolve, reject) => {\n      const request = store.put(item);\n      request.onsuccess = () => { resolve(request.result); };\n      request.onerror = (event) => { reject(event.target.error); };\n    });\n    return promise;\n  }\n\n  setItems(items) {\n    // setItems(items) items是由欲插入条目组成的数组，Array类型,如[{id:1, age:12}, {name: 'x', age: 12}]\n    // 返回值是promise\n    // resolve() 输出最后保存的item.id\n    if (!items || !(items instanceof Array)) throw new TypeError('参数应是一个数组');\n    items.forEach((item) => {\n      if (!item || (typeof item !== 'object')) throw new TypeError('参数只能是一个对象');\n    });\n    if (!this.isReady()) throw new Error('数据库尚未准备好');\n    let promise = this.ready();\n    items.forEach((item) => {\n      promise = promise.then(() => this.setItem(item));\n    });\n    return promise;\n  }\n\n  set(args) {\n    // set(item) 调用setItem(item)\n    // set(items) 调用setItems(items)\n    const isArray = args instanceof Array;\n    const isObj = (typeof args === 'object');\n    if (!isObj && !isArray) throw new TypeError('参数只能是目标数据的id属性值或由id组成的数组');\n    let result;\n    if (isArray) {\n      result = this.setItems(args);\n    } else if (isObj) {\n      result = this.setItem(args);\n    }\n    return result;\n  }\n\n  getItem(id) {\n    // getItem(id) id是目标数据的id属性值 Integer类型,如getItem(1) 拿到id是1的数据\n    // 返回值promise resolve(item) item是结果条目或undefiend\n    if (!Number.isSafeInteger(id)) throw new TypeError('参数只能是目标数据的id属性值');\n    if (!this.isReady()) throw new Error('数据库尚未准备好');\n    const store = this.database.transaction(this.name, 'readwrite').objectStore(this.name);\n    const promise = new Promise((resolve, reject) => {\n      const request = store.get(id);\n      request.onsuccess = () => { resolve(request.result); };\n      request.onerror = (event) => { reject(event.target.error); };\n    });\n    return promise;\n  }\n\n  getItems(ids) {\n    // getItems(ids) ids是由id组成的数组 Array类型,如getItems([1,2,3])\n    // 返回值promise resolve(items) items是由结果组成的数组\n    if (!(ids instanceof Array) || (ids.length === 0)) throw new TypeError('参数只能是目标数据的id属性值组成的数组且不能为空');\n    ids.forEach((id) => {\n      if (!Number.isSafeInteger(id)) throw new TypeError('id属性值应是整数');\n    });\n    const sortIds = ids.sort();\n    const range = IDBKeyRange.bound(sortIds[0], sortIds[sortIds.length - 1]);\n    if (!this.isReady()) throw new Error('数据库尚未准备好');\n    const store = this.database.transaction(this.name, 'readwrite').objectStore(this.name);\n    const promise = new Promise((resolve, reject) => {\n      const request = store.getAll(range);\n      request.onsuccess = () => { resolve(request.result); };\n      request.onerror = (event) => { reject(event.target.error); };\n    });\n    const resPromise = promise.then((items) => {\n      const result = [];\n      items.forEach((item) => {\n        if (sortIds.includes(item.id)) {\n          result.push(item);\n        }\n      });\n      return result;\n    });\n    return resPromise;\n  }\n\n  get(idQuery) {\n    // get(id) id是目标数据的id属性值 Integer类型,如get(1) 调用getItem(id)\n    // 返回值promise resolve(item) item是查询结果或undefiend\n    // get(ids) ids是由id组成的数组 Array类型,如get([1,2,3]) 调用getItems(ids)\n    // 返回值promise resolve(items) items是查询结果组成的数组\n    const isInt = Number.isSafeInteger(idQuery);\n    const isArray = idQuery instanceof Array;\n    if (!isInt && !isArray) throw new TypeError('参数只能是目标数据的id属性值或由id组成的数组');\n    let promise;\n    if (isInt) {\n      promise = this.getItem(idQuery);\n    } else if (isArray) {\n      promise = this.getItems(idQuery);\n    }\n    return promise;\n  }\n\n  getAll(indexName) {\n    // getAll(indexName) indexName参数是索引名,如getAll('id')\n    // 返回值promise resolve(items) items是所有存在indexName列的数据组成的数组\n    const openIndexName = indexName || 'id';\n    if (typeof openIndexName !== 'string') throw new TypeError('索引名只能是字符串');\n    if (!this.isReady()) throw new Error('数据库尚未准备好');\n    const store = this.database.transaction(this.name, 'readwrite').objectStore(this.name);\n    const index = store.index(openIndexName);\n    const promise = new Promise((resolve, reject) => {\n      const request = index.getAll();\n      request.onsuccess = () => { resolve(request.result); };\n      request.onerror = (event) => { reject(event.target.error); };\n    });\n    return promise;\n  }\n\n  findItems(attrQuery) {\n    // findItem(attrQuery) attrQuery是目标条目的属性值,Object类型,如findItem({id: 1, name: 'joy'})\n    // 返回值promise resolve(items) items是符合条件的条目组成的数组\n    if (!attrQuery || (typeof attrQuery !== 'object')) throw new TypeError('参数应该是一个对象');\n    if (!this.isReady()) throw new Error('数据库尚未准备好');\n    const store = this.database.transaction(this.name, 'readwrite').objectStore(this.name);\n    const keys = Object.keys(attrQuery);\n    const firstIndex = store.index(keys[0]);\n    const range = IDBKeyRange.only(attrQuery[keys[0]]);\n    const promise = new Promise((resolve, reject) => {\n      const request = firstIndex.getAll(range);\n      request.onsuccess = () => { resolve(request.result); };\n      request.onerror = (event) => { reject(event.target.error); };\n    });\n    const resPromise = promise.then((items) => {\n      const result = [];\n      items.forEach((item) => {\n        let isEqual = 1;\n        keys.forEach((key) => {\n          if (item[key] !== attrQuery[key]) isEqual = 0;\n        });\n        if (isEqual) {\n          result.push(item);\n        }\n      });\n      return result;\n    });\n    return resPromise;\n  }\n\n  static openDB(databaseName) {\n    // openDB(databaseName) databaseName是数据库名 string类型\n    // 返回值promise resolve(IDBDatabase) reject(Error)\n    if (!databaseName || (typeof databaseName !== 'string')) throw new TypeError(`数据库名不能为${databaseName}`);\n    const promise = new Promise((resolve, reject) => {\n      const request = indexedDB.open(databaseName);\n      request.onsuccess = () => {\n        const database = request.result;\n        database.isOpen = true;\n        database.onclose = () => { database.isOpen = false; };\n        resolve(database);\n      };\n      request.onerror = event => reject(event.target.error);\n    });\n    return promise;\n  }\n}\n\nexport default Store;\n","import Store from './store';\n\nconst missions = new Store('Missions');\n\nmissions.create = item => missions.set(item);\n\nmissions.save = item => missions.set(item);\n\nmissions.init = () => {\n  if (missions.init === 1) return this;\n  missions.init = 1;\n  return missions.ready().then(() => missions.addColumns(['date', 'content']));\n};\nmissions.init();\n\nexport default missions;\n","import missions from './indexeddb/missions';\n\nconst isKeyEnter = event => ((event instanceof KeyboardEvent) && (event.keyCode === 13));\n\nconst isElement = element => (element && (element.nodeType === 1));\n\nconst isString = str => (str && (typeof str === 'string'));\n\nconst getParent = (element) => {\n  if (!isElement(element)) return false;\n  return element.parentNode;\n};\n\nconst getParents = (element) => {\n  if (!isElement(element)) return false;\n  const result = [];\n  let parent = element;\n  for (let index = 0; index < 999; index += 1) {\n    parent = getParent(parent);\n    if (!isElement(parent)) break;\n    result.push(parent);\n  }\n  return result;\n};\n\nconst Index = {\n  i: 0,\n  getIndex: () => {\n    Index.i += 1;\n    return Index.i;\n  },\n};\n\nclass Dom {\n  constructor(query) {\n    if (typeof query === 'string') {\n      const eleReg = /^<(.+)>$/;\n      const eleMatch = query.match(eleReg);\n      if (eleMatch) {\n        const tagName = eleMatch[1].toLocaleUpperCase();\n        this.dom = document.createElement(tagName);\n      } else {\n        return document.querySelectorAll(query);\n      }\n    } else if (query instanceof Dom) {\n      this.dom = query.dom;\n    } else if (isElement(query)) {\n      this.dom = query;\n    } else {\n      console.warn(query);\n      throw new TypeError('无效参数');\n    }\n    return this;\n  }\n\n  static of(str) {\n    return new Dom(str);\n  }\n\n  attr(key, value) {\n    if (!key || !isString(key)) throw new TypeError('没有key参数');\n    let result = this;\n    if (value !== undefined) {\n      this.dom.setAttribute(key, `${value}`);\n    } else {\n      result = this.dom.getAttribute(key);\n    }\n    return result;\n  }\n\n  addClass(content) {\n    if (!content || (typeof content !== 'string')) throw new TypeError('参数应该是字符串');\n    const ary = content.split(' ');\n    ary.forEach(value => this.dom.classList.add(value));\n    return this;\n  }\n\n  removeClass(content) {\n    if (!content || (typeof content !== 'string')) throw new TypeError('参数应该是字符串');\n    const ary = content.split(' ');\n    ary.forEach(value => this.dom.classList.remove(value));\n    return this;\n  }\n\n  append(object) {\n    const element = (object instanceof Dom) ? object.dom : object;\n    if (!element || (element.nodeType !== 1)) throw new TypeError('参数不是html元素');\n    this.dom.appendChild(element);\n    return this;\n  }\n\n  remove(object) {\n    if (!object) {\n      this.dom.remove();\n    } else if (isElement(object)) {\n      this.dom.removeChild(object);\n    } else if (isString(object)) {\n      const element = this.dom.querySelector(object);\n      this.dom.removeChild(element);\n    }\n    return this;\n  }\n\n  text(content) {\n    this.dom.innerText = content;\n    return this;\n  }\n\n  html(content) {\n    this.dom.innerHTML = content;\n    return this;\n  }\n\n  find(query) {\n    return this.dom.querySelector(query);\n  }\n\n  children(query) {\n    return this.dom.querySelectorAll(query);\n  }\n\n  parent() {\n    const parent = this.dom.parentNode;\n    const result = (parent && (parent.nodeType === 1)) ? parent : undefined;\n    return result;\n  }\n\n  parents(query) {\n    const parents = getParents(this.dom);\n    let result = [];\n    if (query && isString(query)) {\n      const all = document.querySelectorAll(query);\n      all.forEach((parent) => {\n        if (parents.includes(parent)) {\n          result.push(parent);\n        }\n      });\n    } else {\n      result = parents;\n    }\n    return result;\n  }\n\n  on(event, callback) {\n    this.dom.addEventListener(event, callback);\n    return this;\n  }\n\n  off(event, callback) {\n    this.dom.removeEventListener(event, callback);\n    return this;\n  }\n}\n\nconst $ = Dom.of;\nwindow.$ = $;\n\nclass Dialog {\n  static createDialogElement() {\n    const body = $('body')[0];\n    if (!body.dom) throw new ReferenceError('页面主体没有加载完');\n    const dialog = $('<div>').addClass('dialog');\n    const curtain = $('<div>').addClass('curtain');\n    const alert = $('<div>').addClass('alert');\n    const msg = $('<div>').addClass('msg');\n    const buttonGroup = $('<div>').addClass('alert-buttons');\n    const submit = $('<button>').text('确定');\n    submit.on('click', () => {\n      body.remove(dialog);\n    });\n    buttonGroup.append(submit);\n    alert.append(msg).append(buttonGroup);\n    dialog.append(curtain).append(alert);\n    return dialog.dom;\n  }\n\n  static alert(message) {\n    if (!message || (typeof message !== 'string')) throw new TypeError('参数只能是字符串');\n    const body = $('body')[0];\n    if (!body.dom) throw new ReferenceError('页面主体没有加载完');\n    const dialog = Dialog.createDialogElement();\n    const msg = dialog.querySelector('.msg');\n    if (!msg) throw new ReferenceError('dialog不完整');\n    msg.innerText = message;\n    return body.append(dialog);\n  }\n}\n\nclass Mission {\n  constructor() {\n    this.element = document.querySelector('#mission');\n    this.listElement = document.querySelector('#mission-list');\n    this.formElement = document.querySelector('#mission-form');\n    this.adderElement = document.querySelector('#add-mission');\n    if (!this.element || !this.listElement || !this.formElement || !this.adderElement) {\n      throw new ReferenceError('界面元素不完整');\n    }\n    this.init();\n    this.loadDB();\n    return this;\n  }\n\n  loadDB() {\n    missions.ready()\n      .then(() => missions.getAll())\n      .then((results) => {\n        results.forEach((result) => {\n          const missionItem = Mission.createMissionItem(result.content, result.date, result.id);\n          $(this.listElement).append(missionItem);\n        });\n      });\n    return this;\n  }\n\n  init() {\n    if (this.init === 1) return false;\n    const openForm = $(this.adderElement).find('*[name=open-form]');\n    $(openForm).on('click', () => {\n      const adderParent = $(this.adderElement).parent();\n      adderParent.insertBefore(this.formElement, this.adderElement);\n      $(this.formElement).find('input[name=content]').value = '';\n      $(this.formElement).find('input[name=date]').value = '';\n      $(this.formElement).attr('data-item-id', '').removeClass('hide');\n    });\n    const submit = $(this.formElement).find('button[name=submit]');\n    $(submit).on('click', () => {\n      const itemId = $(this.formElement).attr('data-item-id');\n      if (!itemId) {\n        this.createMission();\n      } else {\n        this.updateMission();\n      }\n    });\n    const formInputs = $(this.formElement).children('input');\n    formInputs.forEach((input) => {\n      $(input).on('keypress', (event) => {\n        if (isKeyEnter(event)) {\n          submit.click();\n        }\n      });\n    });\n    const hideForm = $(this.formElement).find('*[name=hide-form]');\n    $(hideForm).on('click', () => {\n      $(this.formElement).addClass('hide');\n    });\n    const finishItemButtons = $(this.listElement).children('*[name=finish]');\n    finishItemButtons.forEach((button) => {\n      $(button).on('click', () => {\n        const item = $(button).parents('.mission-item')[0];\n        $(item).remove();\n      });\n    });\n    this.init = 1;\n    return this;\n  }\n\n  static isElementComplete() {\n    const element = document.querySelector('#mission');\n    const listElement = document.querySelector('#mission-list');\n    const formElement = document.querySelector('#mission-form');\n    const adderElement = document.querySelector('#add-mission');\n    return element && listElement && formElement && adderElement;\n  }\n\n  static transformItem(missionItem) {\n    if (!isElement(missionItem) || !missionItem.classList.contains('mission-item')) throw new TypeError('不是任务列表的子元素');\n    const parent = $(missionItem).parent();\n    const nextItem = missionItem.nextSibling;\n    const form = $('#mission-form')[0];\n    const content = $(missionItem).find('*[name=content]').innerText;\n    const date = $(missionItem).find('*[name=date]').innerText;\n    const missionItems = parent.querySelectorAll('.mission-item');\n    missionItems.forEach((item) => {\n      if (item.id !== missionItem.id) {\n        $(item).removeClass('hide');\n      }\n    });\n    $(missionItem).addClass('hide');\n    parent.insertBefore(form, nextItem);\n    $(form).removeClass('hide').attr('data-item-id', missionItem.id);\n    $(form).find('input[name=content]').value = content;\n    $(form).find('input[name=date]').value = date;\n    return form;\n  }\n\n  static createMissionItem(leftText, rightText, id) {\n    if (!Mission.isElementComplete()) throw new ReferenceError('界面元素不完整');\n    const item = $('<li>').addClass('mission-item').attr('id', `item-${id}`).attr('draggable', 'true');\n    const before = $('<div>').addClass('item-before');\n    const moveIcon = $('<i>').addClass('fa fa-arrows');\n    const left = $('<div>').addClass('item-left');\n    const right = $('<div>').addClass('item-right');\n    const icon = $('<i>').addClass('fa fa-circle-o item-icon fa-lg').attr('name', 'finish');\n    const text = $('<span>').attr('name', 'content').text(leftText);\n    const date = $('<span>').attr('name', 'date').addClass('text-sm-center').text(rightText);\n    const link = $('<a>').append(icon);\n    window.link = link;\n    text.on('click', () => {\n      Mission.transformItem(item.dom);\n    });\n    link.on('click', () => {\n      missions.ready()\n        .then(() => missions.delete(id))\n        .then(() => item.remove());\n    });\n    moveIcon.on('click', () => {\n      console.log('这里要改成keydown draggable=\"true\" keyup draggable=\"false\"');\n    });\n    item.on('dragstart', (event) => {\n      const parent = item.parent();\n      $(parent).attr('drag', item.dom.id);\n      event.dataTransfer.setData('Text', item.dom.id);\n      item.addClass('item-curtain');\n    });\n    item.on('dragover', (event) => {\n      event.preventDefault();\n      const parent = item.parent();\n      const itemNext = item.dom.nextSibling;\n      const dragId = $(parent).attr('drag');\n      const dragItem = $(parent).find(`#${dragId}`);\n      const dragNext = dragItem.nextSibling;\n      parent.insertBefore(item.dom, dragNext);\n      parent.insertBefore(dragItem, itemNext);\n    });\n    item.on('drop', (event) => {\n      event.preventDefault();\n      const parent = item.parent();\n      const itemNext = item.dom.nextSibling;\n      const dragId = event.dataTransfer.getData('Text');\n      const dragItem = $(parent).find(`#${dragId}`);\n      const dragNext = dragItem.nextSibling;\n      parent.insertBefore(item.dom, dragNext);\n      parent.insertBefore(dragItem, itemNext);\n      item.removeClass('item-curtain');\n    });\n    before.append(moveIcon);\n    left.append(link).append(text);\n    right.append(date);\n    item.append(before).append(left).append(right);\n    return item.dom;\n  }\n\n  createMission() {\n    const form = this.formElement;\n    const contentInput = $(form).find('input[name=content]');\n    if (!contentInput.value) return false;\n    const dateInput = $(form).find('input[type=date]');\n    const item = { content: contentInput.value, date: dateInput.value };\n    missions.ready()\n      .then(() => missions.create(item))\n      .then((id) => {\n        const missionItem = Mission.createMissionItem(contentInput.value, dateInput.value, id);\n        contentInput.value = '';\n        dateInput.value = '';\n        $(this.listElement).append(missionItem);\n      });\n    $(this.formElement).attr('data-item-id', '');\n    return this;\n  }\n\n  updateMission() {\n    const itemId = $(this.formElement).attr('data-item-id');\n    if (!itemId) return false;\n    const item = $(`#${itemId}`)[0];\n    if (!item) throw new ReferenceError(`找不到#${itemId}元素`);\n    const contentInput = $(this.formElement).find('input[name=content]');\n    const dateInput = $(this.formElement).find('input[name=date]');\n    const content = contentInput.value;\n    const date = dateInput.value;\n    const id = Number(itemId.match(/^item-(\\d+)$/)[1]);\n    const data = { id, content, date };\n    missions.ready()\n      .then(() => missions.save(data))\n      .then(() => {\n        $(item).find('*[name=content]').innerText = content;\n        $(item).find('*[name=date]').innerText = date;\n        $(item).removeClass('hide');\n        contentInput.value = '';\n        dateInput.value = '';\n        $(this.formElement).addClass('hide');\n      });\n    return this;\n  }\n\n  static getElement() {\n    return document.querySelector('#mission');\n  }\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  // Dialog.alert('弹出框');\n  const mission = new Mission();\n  window.mission = mission;\n  // mission.createMission()\n});\n"]}